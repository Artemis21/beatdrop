.card_stack
    display: flex
    flex-direction: column
    gap: 1rem

.card_stack--centred .card
    align-items: center

    // if there is no sub OR there is no thumb, centre the title
    &:not(:has(.card__sub)), &:not(:has(.card__icon, .card__image))
        .card__title
            justify-self: center
            text-align: center

    // if there is only an icon and a title, centre them together
    &:has(.card__icon):not(:has(.card__sub))
        display: flex
        justify-content: center

        .card__icon
            font-size: 2rem

.card
    border: 0
    text-decoration: none
    font: inherit
    text-align: left
    border-radius: 1rem
    padding: 0
    display: grid
    grid-template-areas: "title"
    padding: 1rem
    gap: 0.5rem 1rem
    align-items: center
    background: #eee
    color: #000
    margin: 0 2.5%
    position: relative
    transition: background 50ms linear

    &:has(.card__sub)
        grid-template-areas: "title" "sub"

    &:has(.card__icon, .card__image)
        grid-template-columns: 5rem 1fr
        grid-template-areas: "thumb title"

        &:has(.card__sub)
            grid-template-areas: "thumb title" "thumb sub"

    ol, p
        &:first-child
            margin-top: 0

        &:last-child
            margin-bottom: 0

    ol, .fa-ul
        display: flex
        gap: 0.5rem
        flex-direction: column

    // This becomes an inset border when .card--active is applied. It is defined
    // here to allow for transitions. We use a pseudo element to apply an inset
    // border rather than a standard outer border -- this reduces content shift
    // and keeps card sizes consistent.
    &:after
        position: absolute
        content: ""
        top: 0
        left: 0
        bottom: 0
        right: 0
        border: 0px solid black
        border-radius: 1rem
        transition: border-width 50ms linear
        pointer-events: none

.card--with-sub
    grid-template-areas: "title" "sub"

.card--with-thumb
    grid-template-columns: 5rem 1fr
    grid-template-areas: "thumb title"

    &.card--with-sub
        grid-template-areas: "thumb title" "thumb sub"

.card--extended
    padding: 2rem

    .card__title
        margin-bottom: 0.5rem

.card--button
    cursor: pointer
    transition: transform 100ms linear

    &:hover
        transform: scale(1.05)

    .card__title
        text-decoration: underline

.card--active
    background: #fff

    &:after
        border-width: 4px

.card--good
    background: #0f04
    color: #040

.card--bad
    background: #f004
    color: #400

.card__progress
    position: absolute
    top: 0
    bottom: 0
    left: 0
    border-radius: 1rem
    pointer-events: none
    background: #0002

.card__icon
    grid-area: thumb
    font-size: 2.5rem
    justify-self: center

.card__image
    grid-area: thumb
    position: absolute
    top: -1rem
    right: 0
    width: calc(100% + 1rem)
    height: calc(100% + 2rem)
    overflow: clip
    border-top-left-radius: 1rem
    border-bottom-left-radius: 1rem

    img
        object-fit: cover
        max-height: 100%
        min-width: 100%

.card__title
    grid-area: title
    font-size: 1.2rem
    margin: 0
    font-weight: normal

.card__sub
    grid-area: sub
    margin: 0
    line-height: 1.5
